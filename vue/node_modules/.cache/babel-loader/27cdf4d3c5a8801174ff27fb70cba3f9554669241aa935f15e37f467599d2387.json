{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport 'element-plus/dist/index.css';\nimport ElementPlus from 'element-plus';\nimport '@/assets/css/global.css';\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue';\nconst app = createApp(App);\napp.use(ElementPlus);\napp.use(router).mount('#app');\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n  app.component(key, component);\n}\nrouter.beforeEach(async (to, from, next) => {\n  let isLogin = localStorage.getItem(\"token\"); //判断是否登录了\n  // needLogin  表示哪些路由需要在登录条件下才能访问\n  console.log(to);\n  let needLogin = to.matched.some(match => match.meta.needLogin);\n  if (needLogin) {\n    //需要登录\n    if (isLogin) {\n      //登录过了\n      next();\n    } else {\n      //没有登录\n      // this.$message({\n      //     type: 'error',\n      //     message: '您尚未登录',\n      // });\n      next('/login');\n    }\n  } else {\n    //不需要登录\n    if (isLogin && to.path === '/login') {\n      //如果你访问login页面，则给你跳到首页面，因为不需要登录\n      next('/');\n    } else {\n      next();\n    }\n  }\n});","map":{"version":3,"names":["createApp","App","router","ElementPlus","ElementPlusIconsVue","app","use","mount","key","component","Object","entries","beforeEach","to","from","next","isLogin","localStorage","getItem","console","log","needLogin","matched","some","match","meta","path"],"sources":["D:/JavaProjects/newProject/vue/src/main.js"],"sourcesContent":["import {createApp} from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport 'element-plus/dist/index.css'\nimport ElementPlus from 'element-plus'\nimport '@/assets/css/global.css'\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\n\n\nconst app = createApp(App)\napp.use(ElementPlus)\napp.use(router).mount('#app')\n\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n    app.component(key, component)\n}\n\nrouter.beforeEach(async (to,from,next)=>{\n    let isLogin = localStorage.getItem(\"token\"); //判断是否登录了\n    // needLogin  表示哪些路由需要在登录条件下才能访问\n    console.log(to);\n    let needLogin = to.matched.some(match=>match.meta.needLogin);\n    if(needLogin){\n        //需要登录\n        if(isLogin){\n            //登录过了\n            next()\n        }else{\n            //没有登录\n            // this.$message({\n            //     type: 'error',\n            //     message: '您尚未登录',\n            // });\n            next('/login')\n        }\n    }else{\n        //不需要登录\n        if(isLogin && to.path === '/login'){  //如果你访问login页面，则给你跳到首页面，因为不需要登录\n            next('/')\n        }else{\n            next()\n        }\n    }\n});\n\n"],"mappings":"AAAA,SAAQA,SAAS,QAAO,KAAK;AAC7B,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAO,6BAA6B;AACpC,OAAOC,WAAW,MAAM,cAAc;AACtC,OAAO,yBAAyB;AAChC,OAAO,KAAKC,mBAAmB,MAAM,yBAAyB;AAG9D,MAAMC,GAAG,GAAGL,SAAS,CAACC,GAAG,CAAC;AAC1BI,GAAG,CAACC,GAAG,CAACH,WAAW,CAAC;AACpBE,GAAG,CAACC,GAAG,CAACJ,MAAM,CAAC,CAACK,KAAK,CAAC,MAAM,CAAC;AAE7B,KAAK,MAAM,CAACC,GAAG,EAAEC,SAAS,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACP,mBAAmB,CAAC,EAAE;EAChEC,GAAG,CAACI,SAAS,CAACD,GAAG,EAAEC,SAAS,CAAC;AACjC;AAEAP,MAAM,CAACU,UAAU,CAAC,OAAOC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EACpC,IAAIC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;EAC7C;EACAC,OAAO,CAACC,GAAG,CAACP,EAAE,CAAC;EACf,IAAIQ,SAAS,GAAGR,EAAE,CAACS,OAAO,CAACC,IAAI,CAACC,KAAK,IAAEA,KAAK,CAACC,IAAI,CAACJ,SAAS,CAAC;EAC5D,IAAGA,SAAS,EAAC;IACT;IACA,IAAGL,OAAO,EAAC;MACP;MACAD,IAAI,EAAE;IACV,CAAC,MAAI;MACD;MACA;MACA;MACA;MACA;MACAA,IAAI,CAAC,QAAQ,CAAC;IAClB;EACJ,CAAC,MAAI;IACD;IACA,IAAGC,OAAO,IAAIH,EAAE,CAACa,IAAI,KAAK,QAAQ,EAAC;MAAG;MAClCX,IAAI,CAAC,GAAG,CAAC;IACb,CAAC,MAAI;MACDA,IAAI,EAAE;IACV;EACJ;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}